
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="../theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="../theme/pygments/perldoc.min.css">


  <link rel="stylesheet" type="text/css" href="../theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="../theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="../theme/font-awesome/css/solid.css">


    <link href="https://marek-gaw.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Embedded Stuff Atom">



  


<meta name="author" content="Marek Gawryszewski" />
<meta name="description" content="accumulate.md std::accumulate¶ #include &lt;numeric&gt; Definition Computes the sum of the given value init and the elements in the range [first, last). Example¶ std::vector&lt;int&gt; numbers = { 2, 9, -4, 2 }; int sum = std::accumulate(begin(numbers), end(numbers), 0); . . . Beware! std::vector&lt;double&gt; doubles = { 1.5, 2, 3 …" />
<meta name="keywords" content="c++">


<meta property="og:site_name" content="Embedded Stuff"/>
<meta property="og:title" content="std::accumulate"/>
<meta property="og:description" content="accumulate.md std::accumulate¶ #include &lt;numeric&gt; Definition Computes the sum of the given value init and the elements in the range [first, last). Example¶ std::vector&lt;int&gt; numbers = { 2, 9, -4, 2 }; int sum = std::accumulate(begin(numbers), end(numbers), 0); . . . Beware! std::vector&lt;double&gt; doubles = { 1.5, 2, 3 …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="../drafts/std-accumulate.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-09-01 18:00:00+02:00"/>
<meta property="article:modified_time" content="2020-09-01 18:00:00+02:00"/>
<meta property="article:author" content="../author/marek-gawryszewski.html">
<meta property="article:section" content="Embedded"/>
<meta property="article:tag" content="c++"/>
<meta property="og:image" content="">

  <title>Embedded Stuff &ndash; std::accumulate</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="..">
        <img src="../theme/img/profile.png" alt="Embedded Stuff" title="Embedded Stuff">
      </a>

      <h1>
        <a href="..">Embedded Stuff</a>
      </h1>

<p>Embedded, Linux, Cloud, IoT, Automation</p>

      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="https://www.meetup.com/LodzCEHUG/" >CEHUG</a>
            </li>
            <li>
              <a target="_self" href="http://getpelican.com/" >Pelican</a>
            </li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/marekgawryszewski-2617972" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/marek-gaw" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="..">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://marek-gaw.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="std-accumulate">std::accumulate</h1>
    <p>
      Posted on wto 01 września 2020 in <a href="../category/embedded.html">Embedded</a>

        &#8226; 2 min read
    </p>
  </header>


  <div>
    <p>accumulate.md</p>
<h1 id="stdaccumulate">std::accumulate<a class="headerlink" href="#stdaccumulate" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&lt;numeric&gt;</span><span class="cp"></span>
</code></pre></div>


<p><strong>Definition</strong></p>
<p>Computes the sum of the given value init and the elements in the range [first, last). </p>
<h1 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span> <span class="p">};</span>
<span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">numbers</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">numbers</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
</code></pre></div>


<p>. . .</p>
<p>Beware!</p>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">doubles</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.5</span> <span class="p">};</span>
<span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">doubles</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">doubles</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
</code></pre></div>


<h1 id="example_1">Example:<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;Winter &quot;</span><span class="p">,</span> <span class="s">&quot;is &quot;</span><span class="p">,</span> <span class="s">&quot;Coming.&quot;</span> <span class="p">};</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">sentence</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">words</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">words</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">));</span>
</code></pre></div>


<p>. . . </p>
<p>Hint!</p>
<p>. . .</p>
<div class="highlight"><pre><span></span><code><span class="n">type_of</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span> <span class="c1">// ?</span>
<span class="n">type_of</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span> <span class="c1">//?</span>
</code></pre></div>


<h1 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h1>
<p>Lambda? Lambda!</p>
<div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="n">totalWeight</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">group</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">group</span><span class="p">),</span> <span class="mf">0.</span><span class="p">,</span>
                    <span class="p">[](</span><span class="kt">double</span> <span class="n">currentWeight</span><span class="p">,</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">return</span> <span class="n">currentWeight</span> <span class="o">+</span> <span class="n">person</span><span class="p">.</span><span class="n">getWeight</span><span class="p">();</span>
                    <span class="p">});</span>
</code></pre></div>


<p>first parameter is <em>very</em> interesting!</p>
<h1 id="dont-go-this-way">Don&rsquo;t go this way!<a class="headerlink" href="#dont-go-this-way" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">group</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">group</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">weights</span><span class="p">,</span>
                <span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;*</span> <span class="n">currentWeights</span><span class="p">,</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">currentWeights</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">getWeight</span><span class="p">());</span>
                    <span class="k">return</span> <span class="n">currentWeights</span><span class="p">;</span>
                <span class="p">});</span>
</code></pre></div>


<p>Why?</p>
<p>But this is wrong. I’ve seen this in code. Hell, I’ve done it myself before I knew better about algorithms.</p>
<p>Why is it wrong? Because this code traverses a range, applies a function on each element and puts the results in a new collection. This is what std::transform would express in code.</p>
<h1 id="dont">Do/nt!<a class="headerlink" href="#dont" title="Permanent link">&para;</a></h1>
<p>When the return value of std::accumulate is discarded, it is a sign that it is not the right tool to use.</p>
<h1 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;numeric&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">};</span>

    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">product</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">multiplies</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">());</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">next</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">()),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span>
                                    <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="c1">// start with first element</span>
                                    <span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="sc">&#39;-&#39;</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
                                    <span class="p">});</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;sum: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span>
              <span class="o">&lt;&lt;</span> <span class="s">&quot;product: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">product</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span>
              <span class="o">&lt;&lt;</span> <span class="s">&quot;dash-separated string: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>


<div class="highlight"><pre><span></span><code>sum: <span class="m">55</span>
product: <span class="m">3628800</span>
dash-separated string: <span class="m">1</span>-2-3-4-5-6-7-8-9-10
</code></pre></div>


<h1 id="scott-mayers-said">Scott Mayers said:<a class="headerlink" href="#scott-mayers-said" title="Permanent link">&para;</a></h1>
<p><em>&ldquo;std::accumulate is made to summarize a range&rdquo;</em></p>
<p>which means:</p>
<p><em>std::accumulate takes a collection of elements and returns only one value.</em></p>
<p>and:</p>
<p><em>If you don’t specify anything, std::accumulate does the sum of all the elements in the range that it takes. This sum being done with operator+. And since we need two values to call operator+, we also need a initial value to start off the algorithm.</em></p>
<h1 id="sweetnes">Sweetnes<a class="headerlink" href="#sweetnes" title="Permanent link">&para;</a></h1>
<p>pretty much every algorithm of the STL can be implemented by using std::accumulate!</p>
<div class="highlight"><pre><span></span><code><span class="c">std::accumulate(std::begin(booleans), std::end(booleans), true, std::logical_and&lt;&gt;())</span>
</code></pre></div>


<h1 id="see-also">See also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h1>
<p>adjacent_difference - computes the differences between adjacent elements in a range 
inner_product - computes the inner product of two ranges of elements 
partial_sum - computes the partial sum of a range of elements 
reduce - similar to std::accumulate, except out of order </p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="../tag/c.html">c++</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Embedded Stuff ",
  "url" : "..",
  "image": "",
  "description": "Flex - The minimalist Pelican theme."
}
</script>


</body>
</html>